---
sidebar_position: 2
sidebar_label: 'Create a Recurring Payment'
title: ""
---


import Tabs from '../../../components/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

<Tabs
  defaultValue="javascript"
  values={[
    {label: 'Javascript', value: 'javascript'},
    {label: 'Apple', value: 'apple'},
    {label: 'Android', value: 'android'},
  ]}>
  <TabItem value="javascript">

# Making a Recurring payment
Recurring payments are any repeating transactions that are completed on a periodic basis, such as a car loan, or mortgage. This guide will walk you through how to make a recurring payment plan.

## Create a payment plan
A recurring payment represents a payment that will trigger on an interval. You can create a recurring payment with a set number of payments to enable a payment plan for a payor.

```graphql
mutation {
  createRecurringPayment(input: {
            amount: Int, 
            payment_count: Int
            merchant_uid: String, 
            payment_interval: PAYMENT_INTERVAL, 
            payment_method_id: String, 
            recurring_name: String,
            payor: Payor,
        }) {
 amount_per_payment
 fee_mode
 fee_per_payment
 next_payment_date
 payment_interval
 recurring_id
 remaining_payments
 statuts
}

}
```
### Arguments
To create a payment plan, you need to send a request.

|Key            |description                |
|---------------|---------------------------|
| createRecurringPayment | This object contains all the details needed to create a recurring payment.|

### Required Arguments
The following parameters must be used in order for the payment plan to be created successfully. The query may fail to execute if any parameter is omitted, in which case the required data for processing will need to be requested.

|Key                |type         |       description                     |
|-------------------|-------------|---------------------------------------|     
| amount            |int        |The amount of the recurring payment.|
| merchant_uid      |string      |The Pay Theory merchant is a unique identifier for the merchant that is creating the recurring payment.|
| payment_count      |int      |The total number of payments to be made as part of the recurring schedule.|
| payment_interval  |Payment_Interval     |The interval of the recurring payment. The following intervals are available: <ul><li>WEEKLY</li><li>BI_WEEKLY</li><li>MONTHLY</li><li>QUARTERLY</li><li>BI_ANNUAL</li><li>ANNUAL</li></ul>|
| payment_method_id       |string        |The `payment_method_id` of the tokenized payment method that will be used for the recurring payment.|
| payor  |Payor    |The payor object that the recurring payment will be tied to. This will create a new payor in the system|
| recurring_name      |string      |Custom  name for the recurring payment.|


### Optional Arguments
The parameters listed below provide flexibility in query result customization but are not required to create a payment plan. Default values are frequently assigned to them.

|Key                 |type             |description                                 |
|---------------------|-----------------|--------------------------------------------|    
| amount_per_payment      |int     | The amount of the recurring payment.|
| fee_mode          |FeeMode     |The fee mode for the recurring payment. SERVICE_FEE charges the fees to the payor. MERCHANT_FEE charges the fees to the merchant. Options are<ul><li>SERVICE_FEE</li><li>MERCHANT_FEE(default)</li></ul>|
| recurring_id        |string     | The pay theory unique identifier assigned to the recurring payment.|
| remaining_payments         |int        |The amount of the recurring payment that is still owed. This will be null on a recurring date if there is no fixed payment amount.|
| status              | Recurring status  | The status of the recurring payment.<ul><li>`SYSTEM_FAILURE`: The recurring payment failed due to a system error. Will retry automatically till the system issue is resolved.</li><li>`INSTRUMENT_FAILURE`: The recurring payment failed due to a payment method error. Will not retry until the payment method is updated.</li><li>`SUCCESS`: The last payment was successful.</li></ul> |

***

## Returns
The call will return the newly created recurring payment.
```JSON
{
    "data": {
        "createRecurringPayment": {
            "amount_per_payment": Int,
            "fee_mode": "MERCHANT_FEE",
            "fee_per_payment": Int,
            "payment_interval": "WEEKLY",
            "recurring_description": null,
            "recurring_id": String,
            "remaining_payments": Int,
            "status": "SUCCESS",
        }
    }
}
```

## Next Steps
You can also refer to [create payment subscription](../recurring_payments/create_a_subscription.mdx) and we can also cancel our recurring payments refer to [cancel the recurring payments](../recurring_payments/manage_recurring_payments/cancel_recurring_payments.mdx).

</TabItem>
  <TabItem value="apple">

# Documentation Coming Soon
Our Apple SDK is fully functional. If you would like to implement our Apple SDK select the link below for more information.
<a href= "../../../sdk/apple/MAIN" class="button button--primary button--md">View Apple SDK Reference</a>

  </TabItem>

  <TabItem value="android">

# Documentation Coming Soon
Our Android SDK is fully functional. If you would like to implement our Android SDK select the link below for more information.
<a href= "../../../sdk/android/MAIN" class="button button--primary button--md">View Android SDK Reference</a>

  </TabItem>

</Tabs>
























