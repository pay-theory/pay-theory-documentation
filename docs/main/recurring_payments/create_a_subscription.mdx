---
sidebar_position: 3
sidebar_label: Create a Subscription
title: ""

---

import Tabs from '../../../components/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';


# Making a payment using subscription
A payment subscription involves paying for ongoing use of a service or product. This guide will walk you through how to make a payment using subscription.

## Create a payment plan using subscription
You can also create a recurring payment with no set payment amounts to enable a subscription for a payor.

```graphql title="GraphQL"
mutation {
  createPaymentSubscription(input: {
            amount: Int, 
            merchant_uid: String, 
            payment_interval: PAYMENT_INTERVAL, 
            payment_method_id: String, 
            recurring_name: String,
            payor: Payor,
        }) {
 amount_per_payment
 fee_mode
 fee_per_payment
 next_payment_date
 payment_interval
 recurring_id
 remaining_payments
 statuts
}

}
```
### Arguments
To create a payment subscription plan, you need to send a request.

|Key            |description                |
|---------------|---------------------------|
| createPaymentSubscription | This object contains all the details needed to create a payment subscription.|

### Required Arguments
The following parameters must be used in order for the subscription plan to be created successfully. The query may fail to execute if any parameter is omitted, in which case the required data for processing will need to be requested.

|Key                |type         |       description                     |
|-------------------|-------------|---------------------------------------|     
| amount            |int        |The amount of the recurring payment.|
| merchant_uid      |string      |The Pay Theory merchant is a unique identifier for the merchant that is creating the recurring payment.|
| payment_interval  |Payment_Interval     |The interval of the recurring payment. The following intervals are available: <ul><li>WEEKLY</li><li>BI_WEEKLY</li><li>MONTHLY</li><li>QUARTERLY</li><li>BI_ANNUAL</li><li>ANNUAL</li></ul>|
| payment_method_id       |string        |The `payment_method_id` of the tokenized payment method that will be used for the recurring payment.|
| payor  |Payor    |The payor object that the recurring payment will be tied to. This will create a new payor in the system|
| recurring_name      |string      |Custom  name for the recurring payment.|


### Optional Arguments
The parameters listed below provide flexibility in query result customization but are not required to create a subscription plan. Default values are frequently assigned to them.

|Key                 |type             |description                                 |
|---------------------|-----------------|--------------------------------------------|    
| amount_per_payment      |int     | The amount of the recurring payment.|
| fee_mode          |FeeMode     |The fee mode for the recurring payment. SERVICE_FEE charges the fees to the payor. MERCHANT_FEE charges the fees to the merchant. Options are<ul><li>SERVICE_FEE</li><li>MERCHANT_FEE(default)</li></ul>|
| recurring_id        |string     | The pay theory unique identifier assigned to the recurring payment.|
| remaining_payments         |int        |The amount of the recurring payment that is still owed. This will be null on a recurring date if there is no fixed payment amount.|
| status              | Recurring status  | The status of the recurring payment.<ul><li>`SYSTEM_FAILURE`: The recurring payment failed due to a system error. Will retry automatically till the system issue is resolved.</li><li>`INSTRUMENT_FAILURE`: The recurring payment failed due to a payment method error. Will not retry until the payment method is updated.</li><li>`SUCCESS`: The last payment was successful.</li></ul> |

***

## Returns
The call will return the newly created recurring payment.
```JSON title="JSON"
{
    "data": {
        "createRecurringPayment": {
            "amount_per_payment": Int,
            "fee_mode": "MERCHANT_FEE",
            "fee_per_payment": Int,
            "payment_interval": "WEEKLY",
            "recurring_description": null,
            "recurring_id": String,
            "remaining_payments": Int,
            "status": "SUCCESS",
        }
    }
}
```

***
## Next Steps
You can also refer to [create recurring payment](../recurring_payments/create_a_payment_plan.mdx) and we can also update our recurring payments information refer to [update the recurring payments](../recurring_payments/manage_recurring_payments/update_recurring_payments.mdx).





